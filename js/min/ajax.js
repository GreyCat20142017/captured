"use strict";!function(){function c(t){return l?(s=t,i=document.createElement("iframe"),o="https://www.youtube.com/embed/"+s+"?autoplay=0"+(l?"":"&wmode=transparent"),i.src=o,i.id=s,i.setAttribute("class","video-play video-iframe"),l||i.setAttribute("wmode","opaque"),i):(e=t,a=document.createElement("a"),n="https://www.youtube.com/watch?v="+e+"?autoplay=0",a.textContent="IE-11 непобедим! Перейти на yotube для просмотра видео...",a.title="Перейти по ссылке: "+n,a.href=n,a.target="_blank",a.setAttribute("class","video-ie"),a);var e,a,n,s,i,o}var u="GET",p="data-post",d=["A","SPAN","SVG","USE","PATH"],l=navigator.userAgent.indexOf("Trident/")<0,b=function(t){t&&window.backend.getPostData(u,"api.php?get_likes_count=1&post="+t.post,e,m,!1)},e=function(t){if(t){var e=h.querySelector("span["+p+'-like="'+t.post+'"]');e&&(e.textContent=""+t.likes)}},f=function(t){window.backend.getPostData(u,"api.php?get_reposts_count=1&post="+t.post,a,m,!1)},a=function(t){var e=h.querySelector("span["+p+'-repost="'+t.post+'"]');e&&(e.textContent=""+t.reposts)},m=function(t){console.log(t)},h=document.querySelector(".js-posts-container");h&&h.addEventListener("click",function(t){var e,a,n,s,i,o,r=t.target;if((e=r).tagName&&e.classList&&(d.indexOf(r.tagName.toUpperCase())<0||r.classList.contains("comments__button")))return!1;for(;!r.classList||!r.classList.contains("js-indicator")&&r!==h;)r=r.parentNode;return r.hasAttribute("href")&&r.classList.contains("js-indicator--likes")&&r.parentElement.hasAttribute(p)?l&&(t.preventDefault(),a=r.parentElement.getAttribute(p),window.backend&&window.backend.getPostData(u,"api.php?change_like=1&post="+a,b,m,!1)):r.hasAttribute("href")&&r.classList.contains("js-indicator--repost")&&r.parentElement.hasAttribute(p)?l&&(t.preventDefault(),n=r.parentElement.getAttribute(p),window.backend&&window.backend.getPostData(u,"api.php?change_repost=1&post="+n,f,m,!1)):r.classList.contains("js-indicator--video")&&r.hasAttribute("data-youtube-id")?(t.preventDefault(),s=r.getAttribute("data-youtube-id"),(o=(i=r).parentElement).classList.contains("video-container")&&(i.classList.add("visually-hidden"),o.appendChild(c(s)))):r.hasAttribute("href")&&r.classList.contains("js-indicator--comments")&&r.parentElement.hasAttribute(p)&&(t.preventDefault(),window.location="/"+r.getAttribute("href")),!1})}();